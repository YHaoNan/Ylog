---
title: 927事件中的流氓软件到底会不会窃取信息
date: 2019-09-28 05:40:27
tags: []
categories: Others
---

# 故事的开始
那是9月27号的一个中午，风和日丽，想起下午再坚持上完一节英语就是不太长的国庆十天假，心情是美的。

刚上完篮球课，回寝室的路上，寝室门口站着一个鸭舌帽，其貌不扬，但由内而外散发着浩然正气。大哥捧着手机，点了点什么，突然脸色大变，喊了声“卧槽！”，接着他的手机里就传来了银铃般的荡叫。顿时，寝室旁边卖饼的大妈安静了；楼梯口打游戏的两兄弟不对骂了；洒水车不响了...所有人的目光都射向了这位大哥。大哥处乱不惊，斩钉截铁的按下了音量减，银铃般的荡叫声小了下来，大哥嘴角露出了不易察觉的笑，心想我纵横江湖数十载，岂是一个恶作剧软件能搞垮的？

眉宇间的自信，从容的步伐，好像刚才一切都没发生过一样。零点五秒之后荡叫声又大了起来...

大哥的表情由喜悦到震惊，但是这仍然没有把饱经风霜的他吓到，他的大脑飞速运转，缜密的思考每一个解决方案，最后他拿出了手机，猛地向地上砸去！这一砸，砸出了当代青年的......

好吧，我编不下去了，这是一个真的故事，不过是有些不太艺术的加工，如果那大哥看到了，求放过...

没错，回到寝室，刷了个朋友圈，才知道这算都是一个恶作剧软件的锅，各大高校高数课沦陷，课堂上不断传来不可描述的声音，倒霉的学生甚至被退学，这一历史性的时刻被称为9.27事件

对于这个恶作剧软件，我不太感冒。这东西原理简单，技术难度低，我初中那会儿就靠做这玩意儿找乐子（以至于后来上了中职）。但后来看了看微博，发现有人说这软件并不简单，各路名校教授，计算机专业的大神分析了这个软件，说是里面有自动截图工具，会不停截图窃取个人信息。

![各路大神的分析](https://s2.ax1x.com/2019/09/28/uMvxht.jpg)

对作者为啥用图片这种笨重的方式窃取个人信息表示吃惊之余，我对这群在网上发布各种分析结论的大神的来路深表怀疑。于是我也从朋友那要来了一份这软件，自己去反编译了一下。

# 技术分析：
这段有些许枯燥，可以跳过，直接看结论

反编译完可以看出有很多Java文件，但玩过lua和Java混编的应该能看出来，这些其实都是lua提供的解释器和类库啥的，为的是在Android上运行lua。

![反编译后的部分代码结构](https://s2.ax1x.com/2019/09/28/uMvW79.png)

关键的源码文件都在assets里的两个lua文件里，那里才是作者的实现逻辑。

![lua代码](https://s2.ax1x.com/2019/09/28/uMv4t1.png)


也就是说网上那帮大佬分析代码的位置就是错的，他们说的截图代码是在nirenr包里的screencapture包中。我分析了一下，那个应该是Androlua的编辑器中提供的一个功能，因为这个代码看起来更像功能提供者，而不是截图功能的调用者，我想这个做过项目的一眼就能看出来吧，不知道那个大佬是咋想的。

![screencapture包中的部分代码](https://s2.ax1x.com/2019/09/28/uMxEAs.png)

后来我去找了下nirenr（应该是这个大佬最先把lua移植到android上）的github，在他的开源库`Androlua_Pro`里找到了这个`screencapture`包，也就是说这东西根本不是这个恶作剧软件的作者写的，只是引用的第三方库中包含的。

![githubpage](https://s2.ax1x.com/2019/09/28/uMvhkR.png)

[点这里进入AndroLua_Pro开源库](https://github.com/nirenr/AndroLua_pro/tree/master/app/src/main/java/com/nirenr)

还有说截图是为了占用音量键的，这里我要说一下，Android5之后提供了截图API，这跟按键没关系，你按那个按键也是调用的那个API。实现音量不断放大的方法不少，最笨的就是死循环，还可以监听音量变化的broadcast。

还有就是人家作者代码是用lua写的，竟然有大神发出了一段java的实现代码并声称是破解出来的，大哥你吹牛逼就算了，反编译之后的代码还能有注释你能不能给我解释下咋回事。（可能是原发布者只是展示下原理，传的多了就成了另一个故事）

# 总结
首先这个软件就是个恶作剧而已，虽然不是很道德，但是绝对没有窃取你的隐私。听到了不少声音说“幸好我没用Android”。作为一个开发者，我要给Android系统洗白，Android也挺安全的，要不它有什么理由在是这十几年内屹立不倒？现在的动态权限机制和广播监听限制已经很严格了，用户不瞎给权限是不会出啥事的，所以请别出了个小恶作剧软件就大喊病毒病毒的，窃取个人信息什么的，都是没有的事，以讹传讹只会散播恐慌。也求求各路半吊子大神别再瞎说话了，阴谋论都整出来了。

还有个坑没填就是那两个lua文件里到底有没有截图上传的代码。所以我们分析下用图片窃取个人信息到底可能不可能实现。

图片挺大的，就算压缩完了一张图片也远比文字大，以此软件在各大高校的传播速度来看，作者如果想要用截图收集个人信息，那么他得有很大的经济实力才能经受得起海量的图片存储空间和上传请求。
就算他有，我们想想他能从截图中窃取到的关键信息或者说有价值的信息为多少？几乎为零。你输入密码的时候都是小圆点而不是明文；你的支付宝会帮你把银行卡和姓名、手机号等信息隐藏一段。而且他要从海量的图片中找出几张有用的，这太难了，这一点都不划算。

所以我个人觉得用截图窃取信息这条路走不通，最起码如果是让我来，我是不会走的。

现在的网络环境挺安全的，只要你自己不作，也没啥东西会找上你，我们的信息可能不值得黑客花尽心机去拿。有的人可能说，大数据时代，信息就是一切。其实在天国，那些信息怕是早就公开透明了......

好了，这篇文章是我早上5点写的，别问为啥，你们是放假了，我还得回高中上两天学，哭了
