<html><head><title>Vue和Webpack</title></head><body><p>在前端模块化的今天，只要出现一个前端技术貌似就会和webpack挂上钩，Vue当然也是了。</p>

<p>下面将从零开始使用wabpack搭建一个Vue小示例。</p>

<h2>安装需要的环境</h2>

<p>创建项目文件夹后，先<code>npm init</code>初始化。</p>

<p>然后按照如下目录创建文件：</p>

<pre><code>├── dist
│   └── index.html
├── package.json
├── package-lock.json
├── src
│   ├── App.vue
│   └── index.js
└── webpack.config.js
</code></pre>

<pre><code class="language-bash">npm i -D webpack webpack webpack-dev-server
npm i -P vue
npm i -D vue-loader
npm i -D vue-style-loader
npm i -D vue-template-compiler
npm i -D vue-hot-reload-api
npm i -D babel
npm i -D babel-loader
npm i -D babel-core
npm i -D babel-plugin-transform-runtime
npm i -D babel-preset-es2015
npm i -D babel-runtime
</code></pre>

<p>以上环境全部安装完毕后进行babel的配置，在项目根目录下创建<code>.babelrc</code>，写入如下内容：</p>

<pre><code class="language-json">{
    &#34;presets&#34;: [&#34;es2015&#34;],
    &#34;plugins&#34;: [&#34;transform-runtime&#34;],
    &#34;comments&#34;: false
}
</code></pre>

<p>这个配置用来解析es6，然后我们就可以在项目中用es6去编写代码了。</p>

<p>在<code>webpack.config.js</code>中编写：</p>

<pre><code>var path = require(&#39;path&#39;);
var VueLoaderPlugin = require(&#39;vue-loader/lib/plugin&#39;)

module.exports = {
    mode: &#39;development&#39;,
    entry: {
        main: &#39;./src/index.js&#39;
    },
    output: {
        path: path.join(__dirname,&#39;./dist&#39;),
        publicPath: &#39;/dist&#39;,
        filename: &#39;main.js&#39;
    },
    module: {
        rules: [
            {
                test: /\.vue$/,
                loader: &#39;vue-loader&#39;,
            },
            {
                test: /\.js$/,
                loader: &#39;babel-loader&#39;,
                exclude: /node_modules/
            }
        ]
    },
    plugins:[
        new VueLoaderPlugin()
    ]
}
</code></pre>

<p>这个代码也没啥好解释的，就是在webpack中配置入口出口和一些loader规则。</p>

<p>然后编写<code>App.vue</code>，这是我们的根组件。</p>

<p>vue文件分为三块，分别用<code>template</code>、<code>style</code>和<code>script</code>包裹。分别代表组件的html，样式和基于js的组件配置。</p>

<pre><code class="language-html">&lt;template&gt;
    &lt;div&gt;
        Helo,{{ name }}.
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
    export default {
        data () {
            return {
                name: &#39;Vue.js&#39;
            }
        }
    }
&lt;/script&gt;

&lt;style scoped&gt;&lt;/style&gt;
</code></pre>

<p>这代码也很简单。</p>

<p>我们再看<code>index.js</code>：</p>

<pre><code class="language-js">import Vue from &#39;vue&#39;
import App from &#39;./App.vue&#39;

new Vue({
    el: &#39;#app&#39;,
    render: h =&gt; h(App)
});
</code></pre>

<p>在<code>index.js</code>中引入Vue和我们编写的根组件<code>App.vue</code>，然后初始化vue实例并挂载到主页面的<code>#app</code>节点上。</p>

<p>我们再看<code>dist/index.html</code>：</p>

<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&#34;en&#34;&gt;
&lt;head&gt;
    &lt;meta charset=&#34;UTF-8&#34;&gt;
    &lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div id=&#34;app&#34;&gt;&lt;/div&gt;   
    &lt;script src=&#34;./main.js&#34;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>提供了一个<code>app</code>节点供vue挂载，并引入了经过webpack打包后的<code>main.js</code>文件。</p>

<p>输入<code>npx webpack-dev-server --open --config webpack.config.js</code>运行，也可以在<code>package.json</code>中配置script。</p>

<p>运行后浏览器中显示<code>Helo,Vue.js.</code></p>

<h2>开发之前的yesorno</h2>

<p>yesorno就是一个小工具，你可以提一个问题，他会告诉你是或者否。</p>

<p>我们这次打算用组件的形式开发，把问题的输入框抽象成一个组件，然后它自己监听自己的输入事件，当输入<code>?</code>时向父组件发射<code>submit</code>事件。父组件接收到这个事件后向服务器发送请求，获取数据并渲染到页面。</p>

<p><code>App.vue</code>：</p>

<pre><code class="language-html">&lt;template&gt;
    &lt;div&gt;
        I&#39;ll tell you yes or no.
        &lt;yesorno-input @submit=&#34;answerIt&#34;&gt;&lt;/yesorno-input&gt;
        {{ message }}
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import axios from &#39;axios&#39;
import yesornoInput from &#39;./Dialog.vue&#39;
    export default {
        data () {
            return {
                message: &#39;Waitting for you.&#39;
            }
        },
        components: {
            yesornoInput  
        },
        methods: {
            answerIt (question) {
                this.message = &#39;I\&#39;m thinking...&#39;
                axios.get(&#39;https://yesno.wtf/api&#39;).then(resp=&gt;{
                    if(resp.data.answer){
                       this.message = resp.data.answer; 
                    }else{
                        this.message = &#39;Api Error!&#39;
                    }
                }).catch(err=&gt;{
                    this.message = &#39;Network Error!&#39;
                })
            }
        }
    }
&lt;/script&gt;

&lt;style scoped&gt;&lt;/style&gt;
</code></pre>

<p>我们使用<code>axios</code>向服务器发送请求，使用一个<code>message</code>作为用户提示和答案，并且我们可以发现组件<code>yesorno-input</code>，也就是我们要编写的子组件，它来自<code>Dialog.vue</code>，接下来我们编写这个文件。</p>

<p><code>Dialog.vue</code>：</p>

<pre><code class="language-html">&lt;template&gt;
    &lt;input type=&#34;text&#34; :placeholder=&#34;pholder&#34; @input=&#34;handleInput&#34;&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
    data () {
        return {
            pholder: &#39;Ask me a question!&#39;
        }
    },
    methods: {
        handleInput: function(event){
            var question = event.target.value;
            if(question.endsWith(&#39;?&#39;) || question.endsWith(&#39;？&#39;)){
                this.$emit(&#39;submit&#39;,question);
            }
        }
    }
}
&lt;/script&gt;
</code></pre>

<p>这个组件的内容也很简单，就是监测自己的<code>input</code>并发送事件给父组件。</p>
</body></html>